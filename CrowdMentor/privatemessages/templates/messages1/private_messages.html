{% extends "base.html" %}

{% block content %}
<div class="private_messages">
    <div class="partners">
    {% for thread in threads %}
        <p><a href="{% url 'chat_view' thread_id=thread.id %}">{{ thread.partner.username }} ({{ thread.total_messages|default_if_none:"0" }} )</a></p>
    {% empty %}
        <p>So far there are no messages</p>
    {% endfor %}
    </div>
    <h1>Create messages</h1>
    <form action="{% url 'send_message_view' %}" method="post" class="new_message">
        {% csrf_token %}
        <p>Choose Recipient: &nbsp;&nbsp;&nbsp;&nbsp;
        <select id="recipient_name" name="recipient_name">
            {% for y in chat_participants %}
                <option value="{{ y.0 }}">{{ y.0 }}&nbsp;Online:&nbsp;{{ y.1 }}</option>
            {% endfor %}
        </select>
        </p>
        <p><textarea name="message" placeholder="message"></textarea></p>
        <p><input id="submit" type="submit" value="submit"></p>
    </form>
</div>
{% endblock content %}
